{% extends "base.html" %}

{% block title %}Búsqueda Avanzada - TecnoHub{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/busqueda_avanzada.css') }}">
    <h1>Búsqueda Avanzada</h1>
    
    <form action="{{ url_for('busqueda_avanzada') }}" method="get">
        <div>
            <label for="q">Buscar:</label>
            <input type="text" id="q" name="q" value="{{ query }}">
        </div>
        <div>
            <label for="categoria">Categoría:</label>
            <select id="categoria" name="categoria">
                <option value="">Todas las categorías</option>
                {% for categoria in categorias %}
                    <option value="{{ categoria.id }}" {% if categoria_id|int == categoria.id %}selected{% endif %}>
                        {{ categoria.nombre }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <div>
            <label for="precio_min">Precio mínimo:</label>
            <input type="number" id="precio_min" name="precio_min" value="{{ precio_min }}" min="0" step="0.01">
        </div>
        <div>
            <label for="precio_max">Precio máximo:</label>
            <input type="number" id="precio_max" name="precio_max" value="{{ precio_max }}" min="0" step="0.01">
        </div>
        <button type="submit">Buscar</button>
    </form>
    
    <h2>Resultados de la búsqueda</h2>
    {% if productos %}
        <div class="productos-grid">
            {% for producto in productos %}
                {% include "componentes/producto_card.html" %}
            {% endfor %}
        </div>
    {% else %}
        <p>No se encontraron productos que coincidan con tu búsqueda.</p>
    {% endif %}
{% endblock %}